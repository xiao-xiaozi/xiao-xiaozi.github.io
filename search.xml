<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>一些有趣的网站</title>
      <link href="/2025/12/17/%E4%B8%80%E4%BA%9B%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BD%91%E7%AB%99/"/>
      <url>/2025/12/17/%E4%B8%80%E4%BA%9B%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<br><p>记录在互联网上发现的一些有趣的网站。</p><br><h2 id="技术相关"><a href="#技术相关" class="headerlink" title="技术相关"></a>技术相关</h2><ol><li><a href="https://q.shanyue.tech/">前端部署&#x2F;面试相关</a></li><li><a href="https://howtosos.eryajf.net/">开源项目协作指南</a></li><li><a href="https://github.com/xioacd99/study-is-wonderful">awesome public courses and wonderful study resource</a></li><li><a href="https://thomaspark.co/2020/06/the-mad-magazine-fold-in-effect-in-css/">CSS折页效果</a></li><li><a href="https://tldr.sh/">一个命令说明的查询网站</a></li><li><a href="https://regexlearn.com/">正则表达式入门&#x2F;练习</a></li><li><a href="https://open-slum.org/">Z-Library网址的监控网站</a></li><li><a href="https://garrit.xyz/posts/2023-10-13-organizing-multiple-git-identities">如何在不同项目切换不同的git身份</a></li></ol><h2 id="其它类别"><a href="#其它类别" class="headerlink" title="其它类别"></a>其它类别</h2><ol start="8"><li><a href="https://dudianji.com/">读典籍</a>一个提供文白对照的古代典籍阅读网站，提供了网页和<code>IOS/Google Play</code>版本</li><li>一个<a href="https://www.moviepostersperfected.com/">电影海报库</a>，收集了3500多张 4K 电影海报，提供 API，可以在电视上当屏保播放。</li><li><a href="https://englishnewsinlevels.com/">提供双语阅读的新闻网站</a></li><li><a href="https://beddystories.com/zh">儿童睡前故事</a></li><li><a href="https://www.ghibli.jp/works/">吉卜力电影的高清图</a></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Regexp的基本知识</title>
      <link href="/2025/12/07/Regexp%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/"/>
      <url>/2025/12/07/Regexp%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h1 id="RegExp"><a href="#RegExp" class="headerlink" title="RegExp"></a>RegExp</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>RegExp</code>是正则表达式（Regular Expression）的简称。它便于匹配、查找字符串中的字符。</p><h3 id="基本匹配"><a href="#基本匹配" class="headerlink" title="基本匹配"></a>基本匹配</h3><p>将想要查找的字符或单词直接输入，就像搜索一样。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/curious/gm</span><br></pre></td></tr></table></figure><h3 id="匹配任意字符"><a href="#匹配任意字符" class="headerlink" title="匹配任意字符."></a>匹配任意字符<code>.</code></h3><p><code>.</code>点符号可以匹配任何字符，包括特殊字符和空格。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/./g</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title="[]"></a><code>[]</code></h3><h4 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h4><p>如果想匹配的字符存在相同的部分，则可以用字符集将不同部分放起来。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/b[aeior]r/g</span><br></pre></td></tr></table></figure><p>上述正则表达式匹配字符：<code>bar ber bir bor bur</code></p><h4 id="否定字符集"><a href="#否定字符集" class="headerlink" title="否定字符集"></a>否定字符集</h4><p>在字符集的前面加上一个<code>^</code>符号，指定不匹配的字符。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/b[^eo]r/g</span><br></pre></td></tr></table></figure><p>上述表达式在字符串<code>bar ber bir bor bur</code> 中仅匹配到<code>bar bir bur</code>。</p><h3 id="-1"><a href="#-1" class="headerlink" title="-"></a><code>-</code></h3><p>可以在字符集中使用连字符<code>-</code>，指定字母&#x2F;数字范围，区分大小写，包含起始的字母&#x2F;数字。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[a-z]/g</span><br></pre></td></tr></table></figure><p>上述表达式匹配<code>a-z</code>之间的字母。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[<span class="number">0</span>-<span class="number">9</span>]/g</span><br></pre></td></tr></table></figure><p>上述表达式匹配<code>0-9</code>之间的数字。</p><p><strong>注意：数字范围仅能匹配<code>[0-9]</code>，不支持匹配10以上的数字范围，如：[20-50]。应该用<code>/[2345][0-9]/</code>来匹配20到50之间的数值</strong></p><h3 id="0次或多次"><a href="#0次或多次" class="headerlink" title="0次或多次*"></a>0次或多次<code>*</code></h3><p><code>*</code>号表示一个字符完全不匹配或可以匹配多次。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/be*r/g</span><br></pre></td></tr></table></figure><p>上述表达式匹配:<code>br ber beer</code></p><h3 id="1次或多次"><a href="#1次或多次" class="headerlink" title="1次或多次+"></a>1次或多次<code>+</code></h3><p><code>+</code>号表示一个字符匹配1次或多次。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/be+r/g</span><br></pre></td></tr></table></figure><p>上述表达式在字符串:<code>br ber beer</code>中仅能匹配到:<code>ber beer</code>。</p><h3 id="可选"><a href="#可选" class="headerlink" title="可选?"></a>可选<code>?</code></h3><p>字符后面跟着<code>?</code>符号，表示该字符是可选的（可以有也可以没有）。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/colou?r/g</span><br></pre></td></tr></table></figure><p>上述表达式匹配：<code>color colour</code></p><h3 id="指定次数"><a href="#指定次数" class="headerlink" title="指定次数{}"></a>指定次数<code>&#123;&#125;</code></h3><h4 id="指定字符出现的次数"><a href="#指定字符出现的次数" class="headerlink" title="指定字符出现的次数"></a>指定字符出现的次数</h4><p>为了表示一个字符出现的确切次数，可以在字符的末尾，将它出现的次数写进大括号<code>&#123;&#125;</code>中。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/be&#123;<span class="number">2</span>&#125;r/g</span><br></pre></td></tr></table></figure><p>上述表达式中，字符<code>e</code>后面跟着<code>&#123;2&#125;</code>，说明字符<code>e</code>只能出现两次。多于或少于都不匹配。</p><p>指定字符至少出现几次，在大括号中的数字后加上一个逗号<code>,</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/be&#123;<span class="number">3</span>,&#125;r/g</span><br></pre></td></tr></table></figure><p>上述表达式中，字符<code>e</code>后面跟着<code>&#123;3,&#125;</code>，表示字符<code>e</code>至少出现3次。</p><p>指定字符出现次数的范围</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/be&#123;<span class="number">3</span>,<span class="number">6</span>&#125;r/g</span><br></pre></td></tr></table></figure><p>上述表达式中，字符<code>e</code>后面跟着<code>&#123;3,6&#125;</code>，表示字符<code>e</code>至少出现3次，至多出现6次。在此范围内的才匹配。</p><h3 id="分组"><a href="#分组" class="headerlink" title="分组()"></a>分组<code>()</code></h3><p>使用括号<code>()</code>可以对表达式进行分组，并用这些分组来引用或执行一些规则。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(haa)/g</span><br></pre></td></tr></table></figure><p>上述表达式在字符串：<code>ha-ha,haa-haa</code>，中匹配<code>haa</code>字符。</p><p>使用<code>\1</code>可以引用分组，数字表示分组的顺序。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(ha)-\<span class="number">1</span>,(haa)-\<span class="number">2</span>/g</span><br></pre></td></tr></table></figure><p>上述表达式和<code>/(ha)-ha,(haa)-(haa)/g</code>等价。引用分组可以使表达式更简洁。</p><p>非捕获分组。在分组前面加上<code>?:</code>会导致分组不会被捕获，即不参与引用分组时的排序。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?:ha)-ha,(haa)-\<span class="number">1</span>/g</span><br></pre></td></tr></table></figure><p>上述表达式中由于<code>(?:ha)</code>分组有非捕获的标识，故而<code>\1</code>引用表示的是分组<code>(haa)</code>。</p><h3 id="多个分支"><a href="#多个分支" class="headerlink" title="多个分支|"></a>多个分支<code>|</code></h3><p>竖线允许一个表达式包含多个不同分支。所有分支用<code>|</code>分隔。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(c|r)at|dog/g</span><br></pre></td></tr></table></figure><p>上述表达式同时匹配：<code>cat rat dog</code>。</p><h3 id="转移字符"><a href="#转移字符" class="headerlink" title="转移字符\"></a>转移字符<code>\</code></h3><p>在书写正则表达式时，会用到<code>&#123;&#125; [] / \ + * . $ ^ | ?</code>这些特殊字符。为了匹配这些特殊字符本身，需要通过<code>\</code>反斜杠将它们转义。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(\*|\.)/g</span><br></pre></td></tr></table></figure><p>上述表达式匹配<code>.</code>和<code>*</code>符号。</p><h3 id="匹配开始位置"><a href="#匹配开始位置" class="headerlink" title="匹配开始位置^"></a>匹配开始位置<code>^</code></h3><p>若想仅查找行首的字符，请在表达式前面加上<code>^</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^[<span class="number">0</span>-<span class="number">9</span>]/gm</span><br></pre></td></tr></table></figure><p>上述表达式仅匹配行首的数字。</p><h3 id="匹配结束位置"><a href="#匹配结束位置" class="headerlink" title="匹配结束位置$"></a>匹配结束位置<code>$</code></h3><p>若想仅查找行末的字符，请在表达式后面添加<code>$</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/html$/gm</span><br></pre></td></tr></table></figure><p>上述表达式匹配以<code>html</code>字符结尾的字符。</p><p><code>\w</code>: 匹配字母、数字和下划线</p><p><code>\W</code>: 匹配除字母、数字和下划线之外的字符</p><p><code>\d</code>: 匹配数字</p><p><code>\D</code>: 匹配除数字之外的字符</p><p><code>\s</code>: 匹配空白符</p><p><code>\S</code>: 匹配除空白符之外的字符</p><h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><p>如果期望匹配的字符出现在另一个字符之前或之后，就需要用到断言。</p><h4 id="先行断言"><a href="#先行断言" class="headerlink" title="先行断言"></a>先行断言</h4><p>匹配出现在指定字符之前的字符。（正向先行断言）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/\d+(?=<span class="variable constant_">PM</span>)/g</span><br></pre></td></tr></table></figure><p>上述表达式只匹配字符<code>PM</code>前面的数字。</p><p>也可以反过来匹配不位于指定字符之前的字符。（负向先行断言）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/\d+(?!<span class="variable constant_">PM</span>)/g</span><br></pre></td></tr></table></figure><p>上述表达式只匹配不跟着字符<code>PM</code>的数字。</p><h3 id="后行断言"><a href="#后行断言" class="headerlink" title="后行断言"></a>后行断言</h3><p>匹配出现在指定字符之后的字符。（正向后行断言）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;=\$)\d+/g</span><br></pre></td></tr></table></figure><p>上述表达式仅匹配<code>$</code>符号后的数字。</p><p>匹配非出现在指定字符之后字符。（负向后行断言）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;!\$)\d+/g</span><br></pre></td></tr></table></figure><p>上述表达式仅匹配非跟随在<code>$</code>符号后的数字。</p><h3 id="标识"><a href="#标识" class="headerlink" title="标识"></a>标识</h3><p>标识改变表达式的输出。这也是标识成为<strong>修饰符</strong>的原因，标识决定表达式是否将文本视作单独的行处理，是否区分大小写，或者是否查找所有匹配项。</p><ul><li><code>g</code>: <code>global</code>全局标识，使表达式选中所有匹配项。如果不启用全局标识，那么表达式只会匹配第一个匹配项。</li><li><code>m</code>: <code>multiline</code>多行标识。正则表达式将所有文本视作一行。启用了多行标识，它就会单独处理每一行。</li><li><code>i</code>: <code>case insensitive</code>忽略大小写标识。</li></ul><h3 id="贪婪匹配"><a href="#贪婪匹配" class="headerlink" title="贪婪匹配"></a>贪婪匹配</h3><p>正则表达式默认执行贪婪匹配。这意味着匹配内容会尽可能的长。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/.*r/</span><br></pre></td></tr></table></figure><p>上述表达式会匹配整个字符串：<code>ber beer beeer beeeer</code></p><h3 id="懒惰匹配"><a href="#懒惰匹配" class="headerlink" title="懒惰匹配"></a>懒惰匹配</h3><p>与贪婪匹配不同，懒惰匹配在第一次匹配时停止。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/.*?r/</span><br></pre></td></tr></table></figure><p>上述表达式对字符串：<code>ber beer beeer beeeer</code>进行匹配时，在匹配到<code>ber</code>时即停止匹配。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>[转]良好的系统设计</title>
      <link href="/2025/08/22/%E8%BD%AC-%E8%89%AF%E5%A5%BD%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"/>
      <url>/2025/08/22/%E8%BD%AC-%E8%89%AF%E5%A5%BD%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>作者：阮一峰<br>原文链接：<a href="https://www.ruanyifeng.com/blog/2025/08/weekly-issue-362.html">https://www.ruanyifeng.com/blog/2025/08/weekly-issue-362.html</a></p><p>本文遵循<a href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">知识共享署名-非商业性使用-禁止演绎 3.0 协议 (CC BY-NC-ND 3.0)</a>授权转载。</p><ol><li></li></ol><p>程序设计是组装代码，系统设计是组装服务。</p><p>程序设计的组件是变量、函数、类等，系统设计的组件是服务器、数据库、缓存、队列、事件总线、代理等。</p><ol start="2"><li></li></ol><p>如果一个系统很长时间不出错，它的设计就是良好的。</p><p>如果你进一步看了代码，脱口而出：“哈，这比我想的要简单”，或者“这个部分不用我操心，即使出问题也容易解决”，它的设计就是优秀的。</p><ol start="3"><li></li></ol><p>良好的系统设计，总是从一个有效的简单系统发展而来。千万不要从零开始设计一个复杂的系统。</p><ol start="4"><li></li></ol><p>系统设计的难点在于状态。尽量采用无状态组件，最小化“有状态组件”的数量。</p><p>状态的复杂性在于，你无法简单地重启任务。一旦出错，往往需要手动修复状态。</p><ol start="5"><li></li></ol><p>状态需要保存在数据库。数据库是最重要的系统组件，用来管理状态。</p><p>数据库的设计目的是每张表易于理解：打开看一下表结构，就能大致了解存储的数据内容及其原因。</p><p>千万不要采用复杂的表结构（也就是数据结构），会给代码带来极大的复杂性和性能约束。</p><ol start="6"><li></li></ol><p>数据库往往是系统瓶颈，因为每个页面请求可能要调数十次，数百次数据库，而且是按顺序调用。</p><p>为了避免瓶颈，数据库可以做成一个写入节点和多个只读副本。数据查询都发往只读副本，数据写入发往写入节点。</p><p>写入节点与只读副本之间，存在数据复制延迟。如果更新一条记录后，你需要立即读取它，那么可以将数据存入内存，写入数据库成功后从内存读取。</p><ol start="7"><li></li></ol><p>耗时的操作要拆分出来，放在后台作业（即系统外部的单独服务），排队完成。</p><p>后台作业主要分成两个组件：一个队列服务，一个作业运行器（从队列中获取任务并执行）。</p><p>队列任务的软件，可以用Redis（需要尽快执行的任务），也可以用数据库（不着急的任务）。</p><ol start="8"><li></li></ol><p>如果数据的生成速度和读取速度不匹配，经典解决方案就是缓存。</p><p>缓存的最简单做法，就是把数据保存在内存，否则就使用专门的键值存储软件（如Redis或Memcached），后者的好处是多个服务器可以共享缓存。</p><p>初级工程师希望缓存所有内容，而高级工程师希望尽量少用缓存。因为缓存时状态的来源，不可避免要检验状态和处理状态过期。</p><ol start="9"><li></li></ol><p>除了缓存和后台作业，大型系统通常还有事件中心，一般用的是Kafka。</p><p>事件中心也是一个队列，存放的是“某件事发生了”的消息。比如，用户注册出发了“新账户创建”事件，该事件就放入事件中心，然后由事件中心去通知订阅该事件的多个服务：发送欢迎电子邮件、设置个人空间等等。</p><p>事件中心适用于，发送事件的代码不关心其他服务如何处理事件，或者事件量很大且对响应时间不太敏感。</p><p>不要过度使用事件，很多时候，更简单的做法是让一个服务请求另一个服务的API。</p><p>为了便于除错，所有日志最后都放在一起，你可以立即看到另一个服务的响应。</p><ol start="10"><li>推拉</li></ol><p>如果数据需要传送到多处，有拉取（pull）和推送（push）两种选择。</p><p>一般来说，拉取比较简单（比如大多数网站采用的轮询），推送更节省资源，不需要用户主动请求数据，一旦后端数据发生变化，服务器主动将数据推送到每个客户端。</p><p>如果你确实需要向100万个客户端提供最新数据（就像GMail那样），应该采用推送还是拉取？这要视情况而定。如果采用推送，就要把每次推送放入一个事件队列，并让一大群事件处理器从队列中拉取数据并推送。如果采用拉取，就要部署一堆（比如100台）快速的只读缓存服务器，处理所有读取流量。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>git</title>
      <link href="/2025/07/22/git/"/>
      <url>/2025/07/22/git/</url>
      
        <content type="html"><![CDATA[<h2 id="配置相关"><a href="#配置相关" class="headerlink" title="配置相关"></a>配置相关</h2><p>设置用户名，<code>--global</code>参数设置为全局，对所有仓库生效，缺省时仅对当前仓库生效。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;You Name&quot;</span><br></pre></td></tr></table></figure><p>设置不自动转换换行符为<code>CRLF</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.autocrlf=false</span><br></pre></td></tr></table></figure><h3 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h3><p>设置HTTP代理</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy http://proxy.example.com:8080</span><br></pre></td></tr></table></figure><p>设置HTTPS代理</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global https.proxy https://proxy.example.com:8080</span><br></pre></td></tr></table></figure><p>取消代理，也可以用来取消其它属性设置。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br></pre></td></tr></table></figure><p>在Ubuntu种<code>git</code>默认编辑器为<code>nano</code>。</p><p>修改<code>git</code>的默认编辑器为<code>vim</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.editor vim</span><br></pre></td></tr></table></figure><p>不指定编辑器时，该命令查询当前配置的编辑器。</p><h2 id="取消对文件的追踪"><a href="#取消对文件的追踪" class="headerlink" title="取消对文件的追踪"></a>取消对文件的追踪</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached file/folder</span><br></pre></td></tr></table></figure><h2 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h2><p><code>commit</code>命令相关参数。</p><ul><li><code>feat</code>: 新功能</li><li><code>fix</code>: 修复bug</li><li><code>docs</code>: 文档相关的改动</li><li><code>style</code>: 样式相关改动（不改变代码运行的变动）</li><li><code>refactor</code>: 重构（既不是新增功能，也不是修改bug的改动）</li><li><code>test</code>: 增加测试</li><li><code>chore</code>: 构建过程或辅助工具变动</li></ul><p>修改最近一次提交的信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commmit --amend</span><br></pre></td></tr></table></figure><h2 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h2><p>指定<code>pull</code>的合并方式为<code>rebase</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config pull.revase true</span><br></pre></td></tr></table></figure><h2 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h2><p>开启交互式<code>rebase</code>，可以对每个提交进行处理（压缩历史、修改提交信息等操作）。<code>HEAD~2</code>表示最近的两个提交。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i HEAD~2</span><br></pre></td></tr></table></figure><ul><li><code>pick</code>: 包含提交</li><li><code>reword</code>: 保留提交、进行提交信息修改（不会修改提交内容）</li><li><code>edit</code>: 保留提交、进行修改（可以修改提交的内容）</li><li><code>squash</code>: 压缩提交、将当前提交压缩到上一个提交中，可以编辑两个提交信息的内容</li><li><code>fixup</code>: 压缩提交、将当前提交合并到上一个提交中，舍弃当前提交的信息</li></ul><p>舍弃<code>rebase</code>操作，回到<code>rebase</code>之前。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --abort</span><br></pre></td></tr></table></figure><p>将上游分支的新提交合并到当前分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase branch-name</span><br></pre></td></tr></table></figure><p>该操作会导致当前分支的新提交被重写，不可在公共分支上操作。相比<code>merge</code>操作，减少一个合并提交的信息。</p><h2 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h2><p>回退上一个提交，上次提交的内容会被恢复到工作区。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD^</span><br></pre></td></tr></table></figure><p>前进&#x2F;后退到指定的提交点</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard 哈希值</span><br></pre></td></tr></table></figure><h2 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h2><p>获取远程仓库指定分支到本地</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -n featureName origin/featureName</span><br></pre></td></tr></table></figure><p>推送新分支到远程仓库，并保持分支名与本地分支相同。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin feature-name</span><br></pre></td></tr></table></figure><p>删除远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --delete remoteBranchName</span><br></pre></td></tr></table></figure><h2 id="stash"><a href="#stash" class="headerlink" title="stash"></a>stash</h2><p>将当前工作区储藏</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure><p>查看储藏</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure><p>将最近一个储藏恢复到工作区，但不删除记录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply</span><br></pre></td></tr></table></figure><p>恢复最近一个储藏到工作区，同时删除记录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure><p>多个储藏记录时，删除指定的储藏记录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash drop stash@&#123;number&#125;</span><br></pre></td></tr></table></figure><h2 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h2><p>给最近一次提交打标签</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a v1.0.0</span><br></pre></td></tr></table></figure><p>给指定提交打标签</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a v1.0.0 commitHash</span><br></pre></td></tr></table></figure><p>查看已打的标签</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br></pre></td></tr></table></figure><p>查看指定标签的信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show v1.0.0</span><br></pre></td></tr></table></figure><p>推送指定标签到远程仓库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin v1.0.0</span><br></pre></td></tr></table></figure><p>一次性推送所有未推送到远程仓库的本地标签</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure><p>删除本地（未推送到远程仓库）的tag</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -d tagName</span><br></pre></td></tr></table></figure><p>删除远程仓库指定标签</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin :refs/tags/v1.0.0</span><br></pre></td></tr></table></figure><h2 id="log"><a href="#log" class="headerlink" title="log"></a>log</h2><p>查询提交</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log </span><br></pre></td></tr></table></figure><p>指定查看的提交数量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log -n limit</span><br></pre></td></tr></table></figure><p>将提交信息压缩至一行显示（仅查看首行提交信息）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --oneline</span><br></pre></td></tr></table></figure><p><code>git log</code> 信息之外，包含哪些文件被更改，以及每个文件相应的增删行数</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --stat</span><br></pre></td></tr></table></figure><p>显示每个提交的全部差异，这也是项目历史中最详细的视图</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log -p</span><br></pre></td></tr></table></figure><p>查询指定的提交信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --author=&quot;提交人姓名或邮箱&quot; --since=&quot;30 days ago&quot; --pretty=format:&quot;%h - %an,%ar : %s&quot;</span><br></pre></td></tr></table></figure><ul><li><code>--author=&quot;提交人姓名或邮箱&quot;</code>: 指定提交人，可以是提交人的姓名或邮箱</li><li><code>--since=&quot;30 days ago&quot;</code>: 指定时间范围，近30天</li><li><code>--pretty=format:&quot;%h - %an, %ar : %s&quot;</code>: 自定义输出格式<ul><li><code>%h</code>: 提交的哈希值的简短形式</li><li><code>%an</code>: 提交人姓名</li><li><code>%ar</code>: 提交时间，相对于现在的时间</li><li><code>%s</code>: 提交信息</li></ul></li></ul><h2 id="cherry-pick"><a href="#cherry-pick" class="headerlink" title="cherry-pick"></a>cherry-pick</h2><p><code>cherry-pick</code>命令用于将提交从一个分支转移到另一个分支。</p><p>将指定的提交应用于当前分支。这会在当前分支产生一个新的提交，但新提交的哈希值于原提交不同。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick commitHash</span><br></pre></td></tr></table></figure><p>将 A 和 B 两个提交应用到当前分支。这会在当前分支生成两个对应的新提交。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick hashA hashB</span><br></pre></td></tr></table></figure><p>转移从 A 到 B 的所有提交。它们必须按照正确的顺序防止，提交A比较早于提交B，否则命令将会失败，但不会报错。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick A..B</span><br></pre></td></tr></table></figure><p>使用上面的命令时，提交A将不会包含在<code>cherry-pick</code>中，如果要包含A，可以用下面的语法。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick A^..B</span><br></pre></td></tr></table></figure><p>如果原始提交点是一个合并节点，来自两个分支的合并，那么<code>cherry-pick</code>默认将失败。因为它不知道应该采取哪个分支的代码改动。可以通过<code>-m</code>参数告诉<code>git</code>，应该采取哪个分支的变动。它的参数<code>parent-number</code>是一个从1开始的整数，代表原始提交的父分支编号。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick 1 commitHash</span><br></pre></td></tr></table></figure><p>上面命令标识，<code>cherry-pick</code>采用提交<code>commitHash</code>来自编号<code>1</code>的父分支的变动。<br>一般来说，<code>1</code>号父分支是接受变动的分支（<code>the branch being merged info</code>），<code>2</code>号父分支是作为变动来源的分支（<code>the branch being merged from</code>）。</p><p>如果操作过程中发生代码冲突，<code>cherry-pick</code>会停下来，让用户决定如何操作。<br>用户解决完代码冲突后，第一步将修改的文件重新加入暂存区（<code>git add</code>），第二部使用下面的命令，让<code>cherry-pick</code>过程继续。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick --continue</span><br></pre></td></tr></table></figure><p>发生代码冲突后，放弃合并，回到操作前的状态。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick --abort</span><br></pre></td></tr></table></figure><p>发生代码冲突后，退出<code>cherry-pick</code>，但不回到操作前的状态。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick --quit</span><br></pre></td></tr></table></figure><p><a href="https://ruanyifeng.com/blog/2020/04/git-cherry-pick.html">cherry-pick内容来源</a></p><h2 id="remote"><a href="#remote" class="headerlink" title="remote"></a>remote</h2><p>查看本地分支和追踪情况。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote show origin</span><br></pre></td></tr></table></figure><p>同步删除远程仓库已被删除的分支。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote prune origin</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>云南游记.md</title>
      <link href="/2025/02/22/%E4%BA%91%E5%8D%97%E6%B8%B8%E8%AE%B0-md/"/>
      <url>/2025/02/22/%E4%BA%91%E5%8D%97%E6%B8%B8%E8%AE%B0-md/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>发布这篇游记的时候已经是2025年2月，距离去游玩的日期已经过去快一年了，虽然回来后就一直想将经历写下来但是因为这样那样的原因、一直搁置。过去了快一年的时间，许多细节恐已记不清，还好当时按时间线写了一个简单版本，就以此发上来了。</p><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="2024-03-21-凌晨到昆明，打车回酒店睡觉"><a href="#2024-03-21-凌晨到昆明，打车回酒店睡觉" class="headerlink" title="2024-03-21 凌晨到昆明，打车回酒店睡觉"></a>2024-03-21 凌晨到昆明，打车回酒店睡觉</h2><p>早上起来在昆明老街逛了下，顺便吃早餐。然后去昆明站坐高铁前往大理。</p><h2 id="2024-03-21-13-54-到达大理站，前往预定的民宿办理入住。"><a href="#2024-03-21-13-54-到达大理站，前往预定的民宿办理入住。" class="headerlink" title="2024-03-21 13:54 到达大理站，前往预定的民宿办理入住。"></a>2024-03-21 13:54 到达大理站，前往预定的民宿办理入住。</h2><p>办理完入住后在民宿老板的建议下租了一个电瓶车，开车前往龙龛码头。途经大理古城进去看了下。<br>出来后小电炉直接前往龙龛码头，也就是洱海那边。洱海入口禁止电瓶车开进去、找地方停好车之后步行到洱海边。（里面还有租车服务，环洱海。但我们选择了步行），在洱海边逛到了17点多的时候就离开了。</p><p>出来取车后去往了《去有风的地方》的拍摄地看了下。看完后回民宿路上吃了菌子火锅（其实一般般，没吃出啥特别）。吃完又去逛了夜晚的大理古城。大概十点左右就回去了，因为租车有限制最晚还车时间。</p><h2 id="2024-03-22-早晨"><a href="#2024-03-22-早晨" class="headerlink" title="2024-03-22 早晨"></a>2024-03-22 早晨</h2><p>休息一夜起来后发现在下雨，此时就在纠结是直接上苍山还是去丽江，上玉龙雪山。去丽江的话时间会很赶，要算上丽江回昆明的时间，怕耽误回程。纠结了一个上午后，雨渐停，天气转好，在民宿的天台远远看见了苍山。此时也决定去丽江，上玉龙雪山。<br>此时发现，官方的票已经无法预约23号的了，就找了一个第三方的购票平台买了套票，包含接送，看日照金山，上玉龙雪山（以及一件防寒服和一瓶氧气，一顿非常简单的午餐）。在民宿解决完午饭后、就前往大理站坐动车去往丽江。</p><h2 id="2024-03-22-17-07-到达丽江站"><a href="#2024-03-22-17-07-到达丽江站" class="headerlink" title="2024-03-22 17:07 到达丽江站"></a>2024-03-22 17:07 到达丽江站</h2><p>丽江站出来就有大巴前往丽江古城，五元一位，很便宜，因为定的酒店就在古城里面，直接上车就走了。前往提前订好的民宿办理入住后，去了丽江古城游玩。遇到了忠义夜市，有各种小吃，有云南特色的（炸蜈蚣），也有其它地方的，其实不是特别好吃，就当在这边解决晚餐了。丽江古城的整体游玩体验比大理古城好很多，据说是比较还原的。<br>因为买的套票提前说了玉龙雪山的票得晚上八点才能确定能不能有，所以一边逛丽江古城一边等着消息。随后顺利听到购票成功的消息。（金钱的力量啊，价钱比官方的贵了不少。）</p><p>为了看日照金山，第二天必须五点集合出发（购买套票的接送服务定的时间）。于是我们今晚早早回到民宿准备早点休息。结果回到民宿发现热水供应系统坏了、没办法洗澡，无奈的等了一个多小时未见修好。勉强洗了冷水澡然后睡觉。</p><h2 id="2024-03-23-04-30-起床收拾东西，准备前往集合点。"><a href="#2024-03-23-04-30-起床收拾东西，准备前往集合点。" class="headerlink" title="2024-03-23 04:30 起床收拾东西，准备前往集合点。"></a>2024-03-23 04:30 起床收拾东西，准备前往集合点。</h2><p>在上了接送的小面包车后开始前往玉龙雪山。原定会去牦牛坪看日照金山的，结果因为有人耽误了时间，导致了去牦牛坪看会错过我们坐缆车上玉龙雪山的时间，故而我们直接前往了玉龙雪山。在抵达玉龙雪山山脚下时，看到了日照金山。<br>虽然不知道牦牛坪看会是怎样的景色，但是在这边看感觉也不错（可能是第一次看的加成）。随后坐缆车上玉龙雪山。抵达4506海拔（缆车的终点）时，是早上的八点多。后续还有一段路需要爬上去（有修了楼梯），但是因为积雪太多，暂时封了，不让上，工作人员在清理积雪。在4506待到了九点半左右，问了工作人员说可能还要一个多小时才能放开上山的路。此时开始有点高反不适，想着还要等这么久才爬，遂乘坐缆车下山。</p><p>下山后乘坐大巴前往蓝月谷景点，绕着蓝月谷走了一圈，算着午饭的集合时间来到集合地点。解决完午饭后就准备离开玉龙雪山，回到民宿是下午的两点多，在民宿坐了会后，搭车前往丽江站，准备回昆明。</p><h2 id="2024-03-23-16-20-坐上丽江前往昆明的动车"><a href="#2024-03-23-16-20-坐上丽江前往昆明的动车" class="headerlink" title="2024-03-23 16:20 坐上丽江前往昆明的动车"></a>2024-03-23 16:20 坐上丽江前往昆明的动车</h2><p>在晚上 20:20左右抵达昆明站。继续前往预定的酒店办理入住，然后休息。此时因为在动车上无法休息，因为昨晚睡得少+高反，整个人有点没精神。原预定晚上去昆明逛逛的计划，只有另一个小伙伴去了。他在动车上四个小时睡得倒是很舒服，羡慕坐车睡得着的。</p><h2 id="2024-03-24"><a href="#2024-03-24" class="headerlink" title="2024-03-24"></a>2024-03-24</h2><p>早晨，此时已经来到了游玩的最后一天，准备去买点特产。之前在各个古城，夜市逛的特意没买。一是买了还得带着跑来跑去，二是景点的都贵，质量还不不好说。<br>我们专门留了这个早上的时间去逛昆明的农贸市场，期望可以买到实惠又好的特产。最后去了东华新农贸市场，在市场上逛到了中午，买完特产刚好发现市场旁边有个顺丰，直接就去寄出，免去携带的麻烦。<br>两个包裹，一个寄往广州，一个寄往揭阳。快递费是82，比预想的便宜。</p><p>购买完特产后回到酒店办理退房，前往昆明机场。回广州。</p>]]></content>
      
      
      <categories>
          
          <category> 旅游 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>使用nginx的auth_request模块对前端资源访问鉴权</title>
      <link href="/2024/09/07/%E4%BD%BF%E7%94%A8nginx%E7%9A%84auth-request%E6%A8%A1%E5%9D%97%E5%AF%B9%E5%89%8D%E7%AB%AF%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E9%89%B4%E6%9D%83/"/>
      <url>/2024/09/07/%E4%BD%BF%E7%94%A8nginx%E7%9A%84auth-request%E6%A8%A1%E5%9D%97%E5%AF%B9%E5%89%8D%E7%AB%AF%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E9%89%B4%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<h2 id="业务场景"><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h2><p>对一个老项目的前端静态资源（存放在前端的PDF、excel或word文件，下文中的静态资源特指这些文件。）进行下载鉴权，非登录用户不允许下载。</p><p>项目采用了<code>vue2</code>进行开发，使用<code>axios</code>进行接口请求。请求所需的<code>token</code>是在<code>axios</code>的请求前置拦截器中加到请求头上的。对静态资源的下载则分布在系统各处，通过<code>a</code>标签直接触发下载。故而下载链接没有携带鉴权所需的<code>token</code>信息。</p><h2 id="解决之路"><a href="#解决之路" class="headerlink" title="解决之路"></a>解决之路</h2><p>在一番了解之后，决定采用<code>nginx</code>的<code>auth_request</code>模块进行访问鉴权，对项目的改动可以达到最小。</p><p>通过<code>auth_request</code>模块，可以实现对指定资源的访问时，会调用配置的认证接口，根据认证接口返回的HTTP响应码来指示请求是否被授权。</p><p><strong>nginx配置</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listten</span><span class="number">9000</span>;</span><br><span class="line">  <span class="attribute">server_name</span>localhost;</span><br><span class="line">  </span><br><span class="line">  <span class="section">location</span> /auth &#123;</span><br><span class="line">    internal; <span class="comment">#限制 /auth 路径无法被外部访问</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 提取Cookie中的auth_token字段</span></span><br><span class="line">    <span class="attribute">set</span> <span class="variable">$auth_token</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$http_cookie</span> <span class="regexp">~* &quot;auth_token=([^</span>;]+)(;|$)&quot;) &#123;</span><br><span class="line">        <span class="attribute">set</span> <span class="variable">$auth_token</span> <span class="variable">$1</span>;</span><br><span class="line">     &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">proxy_pass</span> http://ip:port/auth;  <span class="comment"># 转发到后端进行Token验证</span></span><br><span class="line">    <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Authorization <span class="string">&quot;Bearer <span class="variable">$auth_token</span>&quot;</span>;  <span class="comment"># 将Token作为Authorization头发送</span></span><br><span class="line">    <span class="attribute">proxy_pass_request_body</span> <span class="literal">off</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Content-Length <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="section">location</span> /authStatic &#123;  <span class="comment"># 将需要鉴权的静态资源统一放到一起</span></span><br><span class="line">    <span class="attribute">auth_request</span> auth; <span class="comment"># 调用auth_request进行验证</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">error_page</span> <span class="number">401</span> <span class="number">403</span> = <span class="number">404</span> /<span class="number">404</span>.html <span class="comment"># 验证失败时，接口返回401或403，统一转为404</span></span><br><span class="line">     </span><br><span class="line">    roothtml/projectFolder  <span class="comment"># 项目文件夹，鉴权通过时访问文件</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  location / &#123;</span><br><span class="line">    <span class="attribute">root</span>html/projectFolder;</span><br><span class="line">    <span class="attribute">index</span>index.html;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里<code>nginx</code>的配置会对访问<code>/authStatic</code>路径的静态资源，调用<code>auth</code>进行鉴权。<code>/auth</code>配置中首先限制了外部的访问。然后从<code>cookie</code>中获取到鉴权所需的<code>auth_token</code>字段值。</p><blockquote><p>这里从cookie中获取是因为项目中的静态资源是直接以<code>a</code>标签的形式提供给用户下载的。将鉴权所需的<code>auth_token</code>写入cookie可以自动携带上。</p></blockquote><p><code>/auth</code>模块中通过<code>proxy_pass</code>将请求代理到后端服务的指定接口上，然后根据接口返回的HTTP状态码进行响应。这里将<code>401/403</code>响应码统一转为<code>404</code>，鉴权不通过时显示404页面。</p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>一些开发场景下的问题思考</title>
      <link href="/2024/05/18/%E4%B8%80%E4%BA%9B%E5%BC%80%E5%8F%91%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83/"/>
      <url>/2024/05/18/%E4%B8%80%E4%BA%9B%E5%BC%80%E5%8F%91%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83/</url>
      
        <content type="html"><![CDATA[<h3 id="1-局部样式复用的方式？"><a href="#1-局部样式复用的方式？" class="headerlink" title="1. 局部样式复用的方式？"></a>1. 局部样式复用的方式？</h3><p>场景：在几个文件之间（三四个）存在相同&#x2F;相似的样式时，如何复用比较合适？</p><ul><li>首先想到的是建立一个公共样式文件、然后引入到需要用到的地方</li></ul><p>但是公共样式可能只有一两个类而已、为此建立一个公共样式文件，是否有点大动干戈？</p><ul><li>样式相同的部分，抽取为组件，这样可以在组件中维护一套样式即可</li></ul><p>样式相同的情况下、这个局部代码理论上可以作为组件处理，这样既不用创建公共样式文件，又达到了样式统一维护的效果。</p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序在IOS上遇到的日期问题</title>
      <link href="/2024/03/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%9C%A8IOS%E4%B8%8A%E9%81%87%E5%88%B0%E7%9A%84%E6%97%A5%E6%9C%9F%E9%97%AE%E9%A2%98/"/>
      <url>/2024/03/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%9C%A8IOS%E4%B8%8A%E9%81%87%E5%88%B0%E7%9A%84%E6%97%A5%E6%9C%9F%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="业务场景"><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h2><p>在小程序上执行涉及日期的相关操作时，日期值入参为<code>2020-01-01</code>格式。在模拟器以及安卓真机上均正常，但在IOS真机上出现日期错误问题。</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>将日期格式更改为<code>2020/01/01</code>格式，在IOS真机上正常显示。</p><p>可能是由于安卓与IOS底层对日期格式的实现有所不同导致的问题，比较难以排查的是，问题只在真机上才能够复现。</p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>patch-package修改node_modules中的依赖源文件并固化</title>
      <link href="/2024/03/18/patch-package%E4%BF%AE%E6%94%B9node-modules%E4%B8%AD%E7%9A%84%E4%BE%9D%E8%B5%96%E6%BA%90%E6%96%87%E4%BB%B6%E5%B9%B6%E5%9B%BA%E5%8C%96/"/>
      <url>/2024/03/18/patch-package%E4%BF%AE%E6%94%B9node-modules%E4%B8%AD%E7%9A%84%E4%BE%9D%E8%B5%96%E6%BA%90%E6%96%87%E4%BB%B6%E5%B9%B6%E5%9B%BA%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="业务场景"><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h2><p>项目使用了<code>vue-pdf</code>插件，版本号<code>4.2.0</code>，在浏览器里面展示PDF文件，在遇到有签章的文件时，签章无法正常显示。</p><p><code>vue-pdf</code>插件<code>4.2.0</code>版本依赖的<code>pdf-dist</code>版本为<code>2.5.207</code>，此版本的<code>pdf-dist</code>插件不支持显示签章信息，需要改动源码，才可以显示签章。</p><h2 id="解决之路"><a href="#解决之路" class="headerlink" title="解决之路"></a>解决之路</h2><p>修改<code>node_modules</code>并同步到所有项目成员的方法：<a href="https://www.npmjs.com/package/patch-package"><code>patch-package</code></a></p><p>如果项目的包管理器是<code>npm</code>，需要手动下载依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i patch-package</span><br></pre></td></tr></table></figure><p>如果是<code>yarn</code>且版本是v2+，或为<code>pnpm</code>则无需安装任何依赖，包管理器原生支持<code>patch</code>功能。</p><p>需要特别注意的是，<code>yarn</code>的v1版本，除了安装<code>patch-package</code>依赖外，还需额外安装<code>postinstall-postinstall</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add patch-package postinstall-postinstall</span><br></pre></td></tr></table></figure><p>对<code>node_modules</code>文件夹中需要调整的依赖文件进行更改，然后运行命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm patch-package modify-package-name</span><br></pre></td></tr></table></figure><p>命令执行完后会在项目根目录创建一个<code>patches</code>文件夹，存放变动的内容记录以<code>diff</code>的形式。</p><p>在项目的<code>package.json</code>中的<code>script</code>中加上一行配置：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;script&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;postinstall&quot;</span><span class="punctuation">:</span> <span class="string">&quot;patch-package&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>此后项目在执行<code>npm i</code>时，会自动执行<code>patch</code>操作。已经安装过依赖的项目组成员，通过<code>npm i</code>命令加上补丁。新成员在安装依赖时，自动便会打上<code>patch</code>。</p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序webview内嵌H5图片保存问题</title>
      <link href="/2024/03/12/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fwebview%E5%86%85%E5%B5%8CH5%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E9%97%AE%E9%A2%98/"/>
      <url>/2024/03/12/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fwebview%E5%86%85%E5%B5%8CH5%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="业务场景"><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h2><p>在内嵌于第三方小程序的H5项目内，实现将图片保存到用户本地的功能。</p><p><strong>项目所使用的技术栈:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">H5项目: uniapp 开发的项目</span><br><span class="line">微信小程序: 第三方小程序，非项目组所能控制</span><br></pre></td></tr></table></figure><h2 id="解决之路"><a href="#解决之路" class="headerlink" title="解决之路"></a>解决之路</h2><p>了解具体需求之后，在<code>uniapp</code>以及微信小程序文档查找可用的相关API，发现几乎所有的保存相关的接口都无法在H5端调用。能使用上的方法仅有<a href="https://uniapp.dcloud.net.cn/api/request/network-file.html#downloadfile"><code>downloadFile</code></a>接口。通过这个接口，可以拿到图片的临时路径。</p><p>此时想到了小程序内的图片存在可以长按保存的功能，于是进行测试。</p><p>但在实际测试中发现，只有在IOS上才可以保存成功，安卓一直提示保存失败。（长按后的操作弹窗有正常弹出，点保存后提示保存失败。）</p><blockquote><p>事后发现，只有临时路径图片在安卓上才会触发这个保存失败的问题，若是非临时路径则不会出现保存失败问题。</p></blockquote><p>于是，暂时抛弃了，长按保存的方案。又转了一圈微信社区以及uniapp的问答区，看见了有相关问题的讨论，但没有纯H5保存的方法。看起来可行的一个操作是H5与微信小程序通讯，让小程序进行图片保存操作。但这个方案对当前的项目来说比较困难。（没有亲测过，项目的小程序是第三方的，联调比较困难。）</p><p>后面意外在H5项目内的其它地方发现图片长按保存在安卓上是正常的。然后就开始对比两处图片的差异，发现能保存成功的图片是网络地址。但需求的图片是每次打开实时生成的图片，无法做到固定地址访问。</p><p>于是开始转换思路，能否将去掉临时路径？</p><p>最终，通过canvas将临时路径图片绘制出来，通过<code>canvas</code>的API又转为<code>base64</code>图片后，进行展示。测试在安卓以及IOS上均可以保存成功。至此问题解决！</p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/03/08/hello-world/"/>
      <url>/2024/03/08/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="创建一篇文章"><a href="#创建一篇文章" class="headerlink" title="创建一篇文章"></a>创建一篇文章</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure><p>默认以文章的标题作为文件名称，但可以通过编辑<code>_config.yml</code>中的<code>new_post_name</code>参数来改变默认的文件名称，举例来说，设为<code>:year-:month-:day-:title.md</code>可以更方便的通过日期来管理文章。可以使用以下占位符。</p><table><thead><tr><th>变量</th><th>描述</th></tr></thead><tbody><tr><td><code>:title</code></td><td>标题（小写，空格将会被替换为短杠）</td></tr><tr><td><code>:year</code></td><td>建立的年份，比如，2015</td></tr><tr><td><code>:month</code></td><td>建立的月份（有前导零），比如，<code>04</code></td></tr><tr><td><code>i_month</code></td><td>建立的月份（无前导零），比如<code>4</code></td></tr><tr><td><code>:day</code></td><td>建立的日期（有前导零），比如<code>07</code></td></tr><tr><td><code>i_day</code></td><td>建立的日期（无前导零），比如<code>7</code></td></tr></tbody></table><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="创建草稿"><a href="#创建草稿" class="headerlink" title="创建草稿"></a>创建草稿</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new draft &lt;title&gt;</span><br></pre></td></tr></table></figure><h4 id="发布草稿"><a href="#发布草稿" class="headerlink" title="发布草稿"></a>发布草稿</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo publish &lt;title&gt;</span><br></pre></td></tr></table></figure><p>将草稿文件从<code>_drafts</code>文件夹迁移到<code>_post</code>文件夹。</p><h3 id="模板-Scaffold"><a href="#模板-Scaffold" class="headerlink" title="模板(Scaffold)"></a>模板(Scaffold)</h3><p>在新建文章时，Hexo会根据<code>Scaffolds</code>文件夹内的相应文件来创建文件，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new photo <span class="string">&quot;My Gallery&quot;</span></span><br></pre></td></tr></table></figure><p>在执行这行命令时，Hexo会尝试在<code>Scaffolds</code>文件夹中寻找<code>photo.md</code><br>，并根据其内容建立文章，以下是可以在模板内使用的变量：</p><table><thead><tr><th>变量</th><th>描述</th></tr></thead><tbody><tr><td><code>layou</code></td><td>布局</td></tr><tr><td><code>title</code></td><td>标题</td></tr><tr><td><code>date</code></td><td>文件建立日期</td></tr></tbody></table><h3 id="支持的格式"><a href="#支持的格式" class="headerlink" title="支持的格式"></a>支持的格式</h3><p>Hexo 支持以任何格式书写文章，只要安装了相应的渲染插件。</p><p>例如，Hexo默认安装了<code>hexo-renderer-marked</code>和<code>hexo-renderer-ejs</code>，因此不仅可以用<code>Markdown</code>写作，还可以用<code>EJS</code>写作。如果安装了<code>hexo-renderer-pug</code>，甚至可以用<code>Pug</code>模板语言写文章。</p><p>只需要将文章的扩展名从<code>md</code>改成<code>ejs</code>，Hexo就会使用<code>hexo-renderer-ejs</code>渲染这个文件，其他格式同理。</p><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><h3 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h3><p>Front-matter 是文件最上方以<code>---</code>分隔的区域，用于指定个别文件的变量，举例来说：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line"><span class="section">date: 2013/7/13 20:46:25</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>以下是预先定义的参数，可在模板中使用这些参数并加以利用。</p><table><thead><tr><th>参数</th><th align="left">描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>layout</code></td><td align="left">布局</td><td><a href="https://hexo.io/zh-cn/docs/configuration#%E6%96%87%E7%AB%A0">config.default_layout</a></td></tr><tr><td><code>title</code></td><td align="left">标题</td><td>文章的文件名</td></tr><tr><td><code>date</code></td><td align="left">建立日期</td><td>文件建立日期</td></tr><tr><td><code>updated</code></td><td align="left">更新日期</td><td>文件更新日期</td></tr><tr><td><code>comments</code></td><td align="left">开启文章的评论功能</td><td><code>true</code></td></tr><tr><td><code>tags</code></td><td align="left">标签（不适用于分页）</td><td></td></tr><tr><td><code>categories</code></td><td align="left">分类（不适用于分页）</td><td></td></tr><tr><td>permalink</td><td align="left">覆盖文章的永久链接，永久链接应该以 &#x2F; 或 .html结尾</td><td>null</td></tr><tr><td><code>excerpt</code></td><td align="left">纯文本的页面摘要。使用该<a href="https://hexo.io/zh-cn/docs/tag-plugins#%E6%96%87%E7%AB%A0%E6%91%98%E8%A6%81%E5%92%8C%E6%88%AA%E6%96%AD">插件</a>来格式化文本</td><td></td></tr><tr><td>disableNunjucks</td><td align="left">启用时禁用Nunjucks标签 <code>&#123;&#123;&#125;&#125;</code> &#x2F; <code>&#123;% %&#125;</code>和<a href="https://hexo.io/zh-cn/docs/tag-plugins">标签插件</a>的渲染功能</td><td></td></tr><tr><td><code>lang</code></td><td align="left">设置语言以覆盖<a href="https://hexo.io/zh-cn/docs/internationalization#%E8%B7%AF%E5%BE%84">自动监测</a></td><td>继承自<code>_config.yml</code></td></tr><tr><td>published</td><td align="left">文章是否发布</td><td>对于<code>_posts</code>下的文章为<code>true</code>，对于<code>_draft</code>下的文章为<code>false</code></td></tr></tbody></table><h4 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h4><p>根据<code>_config.yml</code>中<code>default_layout</code>的设置，默认布局是<code>post</code>。当文章中的布局被禁用（<code>layout: false</code>），它将不会使用主题处理。然而它仍然会被任何可用的渲染引擎渲染：如果一篇文章是用Markdown写的，并且安装了Markdown渲染引擎（比如默认的<a href="https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>），它将渲染成HTML。</p><p>除非通过<code>disableNunjucks</code>设置或<a href="https://hexo.io/zh-cn/api/renderer#%E7%A6%81%E7%94%A8-Nunjucks-%E6%A0%87%E7%AD%BE">渲染引擎</a>禁用，否则无论布局如何，<a href="https://hexo.io/zh-cn/docs/tag-plugins">标签插件</a>总是被处理。</p><h4 id="分类和标签"><a href="#分类和标签" class="headerlink" title="分类和标签"></a>分类和标签</h4><p>只有文章支持分类和标签，可以在Front-matter中设置。在其它系统中，分类和标签听起来很接近，但是在Hexo中两者有着明显的差异：分类具有顺序性和层次性，也就是说<code>Foo Bar</code>不等于<code>Bar Foo</code>；而标签没有顺序和层次。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> Diary</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">-</span> PS3</span><br><span class="line"><span class="bullet">-</span> Games</span><br></pre></td></tr></table></figure><blockquote><p><strong>分类方法的分歧</strong></p><p>如果有使用过WordPress的经验，就很容易误解Hexo的分类方式。WordPress支持对一篇文章设置多个分类，而且这些分类可以是同级别的，也可以是父子分类。但是Hexo不支持指定多个同级分类。下面的指定方法：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> Diary</span><br><span class="line"><span class="bullet">-</span> Life</span><br></pre></td></tr></table></figure><p>会使分类<code>Life</code>成为<code>Diary</code>的子分类，而不是并列分类。因此，有必要为文章选择尽可能准确的分类。</p><p>如果需要为文章添加多个分类，可以尝试以下<code>list</code>中的方法。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> [Diary, PlayStation]</span><br><span class="line"><span class="bullet">-</span> [ Diary, Games ]</span><br><span class="line"><span class="bullet">-</span> [Life]</span><br></pre></td></tr></table></figure><p>此时这篇文章同时包含三个分类：<code>PlayStation</code>和<code>Games</code>分别都是父分类<code>Diary</code>的子分类，同时<code>Life</code>是一个没有子分类的分类。</p></blockquote><h4 id="JSON-Front-matter"><a href="#JSON-Front-matter" class="headerlink" title="JSON Front-matter"></a>JSON Front-matter</h4><p>除了YAML外，也可以使用JSON来编写Front-matter，只要将<code>---</code>代换成<code>;;;</code>即可。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;title&quot;: &quot;Hello Word&quot;,</span><br><span class="line">&quot;date&quot;: &quot;2013/7/13 20:46:25&quot;</span><br><span class="line">;;;</span><br></pre></td></tr></table></figure><h3 id="标签插件（Tag-Plugin）"><a href="#标签插件（Tag-Plugin）" class="headerlink" title="标签插件（Tag Plugin）"></a>标签插件（Tag Plugin）</h3><p>标签插件和Front-matter中的标签不同，他们是用于在文章中，快速插入特定内容的插件。</p><p>虽然可以使用任何格式书写文章，但是标签插件永远可用，且语法也都是一致的。</p><h4 id="引用块"><a href="#引用块" class="headerlink" title="引用块"></a>引用块</h4><p>在文章中插入引言，可包含作者、来源和标题。</p><p><strong>别号</strong>： quote</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote [author[, source]] [link] [source_link_title] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure><h5 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h5><p>没有提供参数，则只是输出普通的blockquote</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote %&#125;</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendreit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendreit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</p></blockquote><p><strong>引用书上的句子</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote David Levithan, Wide Awake %&#125;</span><br><span class="line">Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</p><footer><strong>David Levithan</strong><cite>Wide Awake</cite></footer></blockquote><p><strong>引用Twitter</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote @DevDocs https://twitter.com/devdocs/status/356095192085962752 %&#125;</span><br><span class="line">NEW: DevDocs now comes with syntax highlighting. http://devdocs.io</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>NEW: DevDocs now comes with syntax highlighting. <a href="http://devdocs.io/">http://devdocs.io</a></p><footer><strong>@DevDocs</strong><cite><a href="https://twitter.com/devdocs/status/356095192085962752">twitter.com/devdocs/status/356095192085962752</a></cite></footer></blockquote><p><strong>引用网络上的文章</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote Seth Godin http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html Welcome to Island Marketing %&#125;</span><br><span class="line">Every interaction is both precious and an opportunity to delight.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Every interaction is both precious and an opportunity to delight.</p><footer><strong>Seth Godin</strong><cite><a href="http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html">Welcome to Island Marketing</a></cite></footer></blockquote><h4 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h4><p>在文章中插入代码。</p><p><strong>别名</strong>: code</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock [title] [lang:language] [url] [link text] [additional options] %&#125;</span><br><span class="line">code snippet</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><p>以<code>option:value</code>的格式指定额外选项，例如：<code>line_number:false first_line:5</code></p><table><thead><tr><th>额外选项</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>line_number</code></td><td>显示行号</td><td><code>true</code></td></tr><tr><td><code>line_threshold</code></td><td>只有代码块的行数超过阈值，才显示行数</td><td>0</td></tr><tr><td><code>highlight</code></td><td>启用代码高亮</td><td><code>true</code></td></tr><tr><td><code>first_line</code></td><td>指定第一个行号</td><td>1</td></tr><tr><td><code>mark</code></td><td>突出显示特定的行，每个值用逗号分隔。使用破折号指定数字范围。例如：<code>mark:1,4-7,10</code>将标记第1，4至7和10行</td><td></td></tr><tr><td><code>warp</code></td><td>用<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table">table</a>包裹代码块</td><td><code>true</code></td></tr></tbody></table><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><p><strong>普通代码块</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock %&#125;</span><br><span class="line">alert(&#x27;Hello World!&#x27;);</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(&#x27;Hello World!&#x27;);</span><br></pre></td></tr></table></figure><p><strong>指定语言</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock lang:objc %&#125;</span><br><span class="line">[rectangle setX: 10 y: 10 width: 20 height: 20];</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[rectangle setX: <span class="number">10</span> y: <span class="number">10</span> width: <span class="number">20</span> height: <span class="number">20</span>];</span><br></pre></td></tr></table></figure><p><strong>附加说明</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock Array.map %&#125;</span><br><span class="line">array.map(callback[, thisArg])</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>Array.map</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.map(callback[, thisArg])</span><br></pre></td></tr></table></figure><p><strong>附加说明和网址</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock _.compact http://underscorejs.org/#compact Underscore.js %&#125;</span><br><span class="line">_.compact([0, 1, false, 2, &#x27;&#x27;, 3]);</span><br><span class="line">=&gt; [1, 2, 3]</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>_.compact</span><a href="http://underscorejs.org/#compact">Underscore.js</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_.compact([0, 1, false, 2, &#x27;&#x27;, 3]);</span><br><span class="line">=&gt; [1, 2, 3]</span><br></pre></td></tr></table></figure><h3 id="反引号代码块"><a href="#反引号代码块" class="headerlink" title="反引号代码块"></a>反引号代码块</h3><p>另一种形式的代码块，不同的是它使用三个反引号来包裹。</p><p>`&#96;&#96; [language] [title] [url] [link text] code snippet &#96;&#96;&#96;</p><h3 id="Pull-Quote"><a href="#Pull-Quote" class="headerlink" title="Pull Quote"></a>Pull Quote</h3><p>在文章中插入Pull Quote。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pullquote [class] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure><blockquote class="pullquote [class]"><p>content</p></blockquote><h3 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h3><p>在文章插入iframe。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% iframe url [width] [height] %&#125;</span><br></pre></td></tr></table></figure><h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><p>在文章中插入指定大小的图片。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% img [class names] /path/to/image [width] [height] &#x27;&quot;title text&quot; &quot;alt text&quot;&#x27; %&#125;</span><br></pre></td></tr></table></figure><h3 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h3><p>在文章中插入链接，并自动给外部链接添加<code>target=&quot;_blank&quot;</code>属性。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link text url [external] [title] %&#125;</span><br></pre></td></tr></table></figure><h3 id="Include-Code"><a href="#Include-Code" class="headerlink" title="Include Code"></a>Include Code</h3><p>插入<code>source/downloads/code</code>文件夹内的代码文件。<code>source/downloads/code</code>不是固定的，取决于在配置文件中<code>code_dir</code>的配置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code [title] [lang:language] [from:line] [to:line] path/to/file %&#125;</span><br></pre></td></tr></table></figure><h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h4><p><strong>嵌入test.js文件全文</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript test.js %&#125;</span><br></pre></td></tr></table></figure><p><strong>只嵌入第三行</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:3 to:3 test.js %&#125;</span><br></pre></td></tr></table></figure><p><strong>嵌入第五行到第八行</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:5 to:8 test.js %&#125;</span><br></pre></td></tr></table></figure><p><strong>嵌入第五行至文件结束</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:5 test.js %&#125;</span><br></pre></td></tr></table></figure><p><strong>嵌入第一行至第八行</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript to:8 test.js %&#125;</span><br></pre></td></tr></table></figure><h3 id="引用文章"><a href="#引用文章" class="headerlink" title="引用文章"></a>引用文章</h3><p>引用其它文章的链接。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_path filename %&#125;</span><br><span class="line">&#123;% post_link filename [title] [escape] %&#125;</span><br></pre></td></tr></table></figure><p>在使用此标签时可以忽略文章文件所在的路径或者文章的永久链接信息、如语言、日期。</p><p>例如，在文章中使用<code>&#123;% post_link how-to-back-a-cake %&#125;</code>时，只需有一个名为<code>how-to-back-a-cake.md</code>的文章文件即可。即使这个文件位于站点文件夹的<code>source/posts/2015-02-my-family-holiday</code>目录下、或者文章的永久链接是<code>2018/en/how-to-back-a-cake</code>，都没有影响。</p><p>默认链接文字是文章的标题，也可以自定义要显示的文本。</p><p>默认对文章的标题和自定义标题的特殊字符进行转义。可以使用<code>escape</code>选项，禁止对特殊字符进行转义。</p><p>例如：</p><p><strong>链接使用文章标题</strong></p><p><code>&#123;% post_link hexo-3-8-released %&#125;</code></p><a href="/2024/03/12/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fwebview%E5%86%85%E5%B5%8CH5%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E9%97%AE%E9%A2%98/" title="微信小程序webview内嵌H5图片保存问题">微信小程序webview内嵌H5图片保存问题</a><br/><br/><p><strong>链接使用自定义文字</strong></p><a href="/2024/03/12/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fwebview%E5%86%85%E5%B5%8CH5%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E9%97%AE%E9%A2%98/" title="微信小程序webview内嵌H5图片保存问题">导航到一篇文章</a><br/><br/><p><strong>对标题的特殊字符进行转义</strong></p><p><code>&#123;% post_link hexo-4-released 'How to use <b> tag in title' %&#125;</code></p><a href="/2024/03/12/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fwebview%E5%86%85%E5%B5%8CH5%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E9%97%AE%E9%A2%98/" title="微信小程序webview内嵌H5图片保存问题">How to use &lt;b&gt; tag in title</a><br/><br/><p><strong>禁止对标题的特殊字符进行转义</strong></p><p><code>&#123;% post_link hexo-4-released '<b>bold</b> custom title' false %&#125;</code></p><a href="/2024/03/12/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8Fwebview%E5%86%85%E5%B5%8CH5%E5%9B%BE%E7%89%87%E4%BF%9D%E5%AD%98%E9%97%AE%E9%A2%98/" title="微信小程序webview内嵌H5图片保存问题"><b>bold</b> custom title</a><h2 id="使用的主题"><a href="#使用的主题" class="headerlink" title="使用的主题"></a>使用的主题</h2><p><a href="https://www.haomwei.com/technology/maupassant-hexo.html">地址</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
